<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Simulation</title>

  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; color: #fff; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; }
    body { min-height: 100vh; background: black; overflow-x: hidden; transition: background-color 0.3s; }
    .topnav { background-color: #031D44; overflow: hidden; height: 80px; width: 100%; border-bottom: #ffffff 2px solid; }
    .topnav a { float: right; color: white; text-align: center; padding: 12px 16px; margin: 16px; text-decoration: none; border-radius: 20px; font-size: 17px; }
    .topnav a:hover { background-color: #021532; color: white; }
    .topnav a.active { background-color: white; color: black; }
    .disabled { pointer-events: none; opacity: 0.4; }
    .sim-container { display:flex; justify-content:center; margin-top:24px; }
    .simbox { width:100%; max-width:1100px; padding:18px; border-radius:10px; }
    .gridwrap { display:flex; gap:40px; justify-content:space-between; align-items:flex-start; }
    .gridcontainer { width:42%; background:#071227; padding:14px; border-radius:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.6); }
    .team-title { font-size:18px; margin-bottom:10px; font-weight:700; text-align:center; }
    .griditem { padding:8px; margin:6px 0; background:#0f2436; border-radius:6px; text-align:center; }
    .griditem.selected { background:#ffd54f; color:#000; font-weight:700; }
    .sbox-container { margin-top:20px; display:flex; justify-content:center; gap:20px; align-items:center; }
    .sbox { display:flex; align-items:center; gap:12px; }
    .circle { width:36px; height:36px; border-radius:50%; background:#ffffff; }
    .sboxtext { font-size:22px; font-weight:700; }
    .results { margin-top:18px; display:flex; gap:20px; justify-content:space-between; }
    .result-box { background:#071227; padding:12px; border-radius:8px; width:32%; min-height:80px; }
    .result-box h3 { margin:0 0 6px 0; font-size:14px; }
    .result-box pre { margin:0; white-space:pre-wrap; color:#e6eef8; font-size:13px; }
  </style>
</head>

<body id="mainBody">

<div class="topnav" style="padding-right: 25px">
      <a href="home.html">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
          class="bi bi-house" viewBox="0 0 16 16">
          <path
            d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
        </svg>
      </a>
      <a class="active" href="simulation.html">Simulation</a>
      <a href="gambling.html">Gambling</a>
      <a href="warning.html">Warning</a>
</div>

<div class="sim-container">
  <div class="simbox">

    <!-- TEAMS -->
    <div class="gridwrap">
      <div class="gridcontainer left">
        <div class="team-title" id="team1-title">Team 1</div>
        <div id="team1-players"></div>
      </div>

      <div class="gridcontainer right">
        <div class="team-title" id="team2-title">Team 2</div>
        <div id="team2-players"></div>
      </div>
    </div>

    <!-- WIN PERCENT CIRCLE -->
    <div class="sbox-container">
      <div class="sbox">
        <div class="circle"></div>
        <div class="sboxtext" id="percentDisplay">--%</div>
      </div>
    </div>

    <!-- OUTPUT BOXES -->
    <div class="results">
      <div class="result-box">
        <h3>Win Percentages</h3>
        <pre id="winPct">--</pre>
      </div>
      <div class="result-box">
        <h3>Predicted Scores</h3>
        <pre id="predScores">--</pre>
      </div>
      <div class="result-box">
        <h3>Top 5 Hit Percentages</h3>
        <pre id="top5">--</pre>
      </div>
    </div>

    <div style="margin-top:12px; display:flex; gap:12px; align-items:center; justify-content:center;">
      <div id="simCountDisplay" style="color:#fff;font-size:13px;margin-left:12px;">Simulations: --</div>
    </div>

    <button onclick="runSim()" id="runSimBtn" style="color:#000000;margin-top:20px;width:100%;padding:14px;border-radius:8px;font-size:16px;">Run Simulation</button>

  </div>
</div>

<script>
const API_URL = "http://localhost:5001";

/* --------------------------------------------------
   Load lineups and pitchers from localStorage
   Users select teams & players on gambling.html which saves:
   - 'home_lineup' (JSON array of 9 batters)
   - 'away_lineup' (JSON array of 9 batters)
   - 'home_pitcher' (string)
   - 'away_pitcher' (string)
   This code falls back to example players if none found.
-------------------------------------------------- */
function getStoredArray(key, fallback) {
  try {
    const raw = localStorage.getItem(key);
    if (!raw) return fallback;
    const parsed = JSON.parse(raw);
    if (Array.isArray(parsed)) return parsed;
    return fallback;
  } catch (e) { return fallback; }
}

const team1 = getStoredArray('home_lineup', ["Player A1","Player A2","Player A3","Player A4","Player A5","Player A6","Player A7","Player A8","Player A9"]);
const team2 = getStoredArray('away_lineup', ["Player B1","Player B2","Player B3","Player B4","Player B5","Player B6","Player B7","Player B8","Player B9"]);
const home_pitcher = localStorage.getItem('home_pitcher') || 'Unknown';
const away_pitcher = localStorage.getItem('away_pitcher') || 'Unknown';
const team1Name = localStorage.getItem('team1') || 'Team 1';
const team2Name = localStorage.getItem('team2') || 'Team 2';

function populateTeams() {
  const t1 = document.getElementById("team1-players");
  const t2 = document.getElementById("team2-players");
  t1.innerHTML = "";
  t2.innerHTML = "";
  team1.forEach((p, i) => t1.innerHTML += `<div class="griditem${''}">${p}${i===0? '':''}</div>`);
  team2.forEach((p, i) => t2.innerHTML += `<div class="griditem${''}">${p}${i===0? '':''}</div>`);

  // show selected pitchers and real team names in the team title area
  const t1title = document.getElementById('team1-title');
  const t2title = document.getElementById('team2-title');
  if (t1title) t1title.textContent = `${team1Name} — Pitcher: ${home_pitcher}`;
  if (t2title) t2title.textContent = `${team2Name} — Pitcher: ${away_pitcher}`;
}

populateTeams();

// Show simulation count on initial page load (default to 500)
(function(){
  try{
    let n = parseInt(localStorage.getItem('num_simulations'), 10);
    if (isNaN(n) || n < 1) n = 500;
    const el = document.getElementById('simCountDisplay');
    if (el) el.textContent = `Simulations: ${n}`;
  }catch(e){ /* ignore */ }
})();

// Load CSV data (batters & pitchers) for client-side simulation
let battersData = [];
let pitchersData = [];
document.getElementById('runSimBtn').disabled = true;
function tryEnableRun() {
  if (battersData.length > 0 && pitchersData.length > 0) document.getElementById('runSimBtn').disabled = false;
}

Papa.parse('Data/API Output-Batters.csv', { download: true, header: true, skipEmptyLines: true,
  complete: function(res){ battersData = res.data || []; console.debug('Loaded batters:', battersData.length); tryEnableRun(); },
  error: function(e){ console.error('Batters load error', e); }
});

Papa.parse('Data/API Output-Pitchers.csv', { download: true, header: true, skipEmptyLines: true,
  complete: function(res){ pitchersData = res.data || []; console.debug('Loaded pitchers:', pitchersData.length); tryEnableRun(); },
  error: function(e){ console.error('Pitchers load error', e); }
});

function findPlayerRecord(name, list) {
  if (!name || !list) return null;
  const exact = list.find(r => ((r.PlayerName||r.Player||r.Name||'')+'').trim() === name.trim());
  if (exact) return exact;
  // try case-insensitive partial match
  const lower = name.toLowerCase();
  return list.find(r => ((r.PlayerName||r.Player||r.Name||'')+'').toLowerCase().includes(lower));
}

function parseNumberFromKeys(obj, keys){
  for (const k of keys){ if (obj[k] !== undefined && obj[k] !== ''){ const v = parseFloat(String(obj[k]).replace(/[^0-9\.\-]/g,'')); if (!isNaN(v)) return v; } }
  return null;
}

function offenseScoreForBatter(rec){
  if (!rec) return 0.2;
  // look for OPS, OBP, SLG, AVG
  const ops = parseNumberFromKeys(rec, ['OPS','ops','OpS','oPS']);
  if (ops) return ops;
  const obp = parseNumberFromKeys(rec, ['OBP','obp']);
  const slg = parseNumberFromKeys(rec, ['SLG','slg']);
  if (obp !== null && slg !== null) return obp + slg;
  const avg = parseNumberFromKeys(rec, ['AVG','avg','BA','ba']);
  if (avg) return avg * 3; // scale
  return 0.5; // fallback
}

function defenseFactorForPitcher(rec){
  if (!rec) return 1.0;
  const era = parseNumberFromKeys(rec, ['ERA','era']);
  if (era) return 1 / (1 + (era/4)); // lower era -> higher defense (closer to 1)
  return 0.9;
}

function samplePoisson(lambda){
  if (lambda <= 0) return 0;
  const L = Math.exp(-lambda);
  let k = 0; let p = 1;
  while (p > L){ k++; p *= Math.random(); }
  return k-1;
}

async function runSim() {
    document.getElementById("winPct").textContent = "Running...";
    document.getElementById("predScores").textContent = "Running...";
    document.getElementById("top5").textContent = "Running...";
    document.getElementById("percentDisplay").textContent = "--%";

    // require CSVs to be loaded
    if (battersData.length === 0 || pitchersData.length === 0){
      alert('CSV data not loaded yet. Please wait a moment and try again.');
      return;
    }

    // Use number of simulations from localStorage (set by gambling page), default 500
    let nSims = parseInt(localStorage.getItem('num_simulations'), 10);
    if (isNaN(nSims) || nSims < 1) nSims = 500;
    // Update visible counter
    try { const el = document.getElementById('simCountDisplay'); if (el) el.textContent = `Simulations: ${nSims}`; } catch(e){}

    // Helper functions to extract stats
    function getPitcherStats(name) {
      const rec = findPlayerRecord(name, pitchersData);
      if (!rec) return null;
      const bf = parseNumberFromKeys(rec, ['battersFaced','BF','bf']) || 1;
      return {
        k_rate: (parseNumberFromKeys(rec, ['strikeOuts','SO','K']) || 0) / bf,
        bb_rate: (parseNumberFromKeys(rec, ['baseOnBalls','BB','Walks']) || 0) / bf,
        hit_rate: (parseNumberFromKeys(rec, ['hits','H']) || 0) / bf,
        hr_rate: (parseNumberFromKeys(rec, ['homeRuns','HR']) || 0) / bf,
        double_rate: (parseNumberFromKeys(rec, ['doubles','2B']) || 0) / bf,
        triple_rate: (parseNumberFromKeys(rec, ['triples','3B']) || 0) / bf
      };
    }

    function getBatterStats(name) {
      const rec = findPlayerRecord(name, battersData);
      if (!rec) return null;
      const pa = parseNumberFromKeys(rec, ['plateAppearances','PA']) || 1;
      return {
        k_rate: (parseNumberFromKeys(rec, ['strikeOuts','SO','K']) || 0) / pa,
        bb_rate: (parseNumberFromKeys(rec, ['baseOnBalls','BB','Walks']) || 0) / pa,
        hit_rate: (parseNumberFromKeys(rec, ['hits','H']) || 0) / pa,
        hr_rate: (parseNumberFromKeys(rec, ['homeRuns','HR']) || 0) / pa,
        double_rate: (parseNumberFromKeys(rec, ['doubles','2B']) || 0) / pa,
        triple_rate: (parseNumberFromKeys(rec, ['triples','3B']) || 0) / pa
      };
    }

    function simulatePlateAppearance(batterStats, pitcherStats) {
      // Blend batter and pitcher stats (60% batter, 40% pitcher)
      const k_prob = 0.6 * batterStats.k_rate + 0.4 * pitcherStats.k_rate;
      const bb_prob = 0.6 * batterStats.bb_rate + 0.4 * pitcherStats.bb_rate;
      const hr_prob = 0.6 * batterStats.hr_rate + 0.4 * pitcherStats.hr_rate;
      const double_prob = 0.6 * batterStats.double_rate + 0.4 * pitcherStats.double_rate;
      const triple_prob = 0.6 * batterStats.triple_rate + 0.4 * pitcherStats.triple_rate;
      const single_prob = (0.6 * batterStats.hit_rate + 0.4 * pitcherStats.hit_rate) - (hr_prob + double_prob + triple_prob);
      const single_prob_adj = Math.max(0, single_prob);
      const total_prob = k_prob + bb_prob + hr_prob + double_prob + triple_prob + single_prob_adj;
      const out_prob = Math.max(0, 1 - total_prob);

      // Simulate outcome
      const rand = Math.random();
      let cumulative = 0;
      cumulative += k_prob;
      if (rand < cumulative) return ['K', 0];
      cumulative += bb_prob;
      if (rand < cumulative) return ['BB', 1];
      cumulative += hr_prob;
      if (rand < cumulative) return ['HR', 4];
      cumulative += triple_prob;
      if (rand < cumulative) return ['triple', 3];
      cumulative += double_prob;
      if (rand < cumulative) return ['double', 2];
      cumulative += single_prob_adj;
      if (rand < cumulative) return ['single', 1];
      return ['out', 0];
    }

    // track per-player hits in the provided playerHits object (counts hits in this game)
    function simulateHalfInning(lineup, pitcherName, batterIdx, playerHits) {
      let outs = 0, runs = 0;
      let bases = [false, false, false];
      const pitcherStats = getPitcherStats(pitcherName);
      while (outs < 3) {
        const batterName = lineup[batterIdx];
        const batterStats = getBatterStats(batterName);
        if (!batterStats || !pitcherStats) { outs++; batterIdx = (batterIdx + 1) % lineup.length; continue; }
        const [outcome, basesAdvanced] = simulatePlateAppearance(batterStats, pitcherStats);
        if (outcome === 'K' || outcome === 'out') {
          outs++;
        } else if (outcome === 'BB') {
          // Walk: advance runners if forced
          if (bases[0] && bases[1] && bases[2]) { runs++; }
          else if (bases[0] && bases[1]) { bases[2] = true; }
          else if (bases[0]) { bases[1] = true; }
          bases[0] = true;
        } else if (outcome === 'HR') {
          // HR counts as a hit for the batter
          playerHits[batterName] = (playerHits[batterName] || 0) + 1;
          runs += bases.filter(b => b).length + 1;
          bases = [false, false, false];
        } else if (outcome === 'single' || outcome === 'double' || outcome === 'triple') {
          // Count hit for batter
          playerHits[batterName] = (playerHits[batterName] || 0) + 1;
          // Advance runners
          for (let i = 2; i >= 0; i--) {
            if (bases[i]) {
              const newBase = i + basesAdvanced;
              if (newBase >= 3) { runs++; bases[i] = false; }
              else { bases[newBase] = true; bases[i] = false; }
            }
          }
          bases[basesAdvanced - 1] = true;
        }
        batterIdx = (batterIdx + 1) % lineup.length;
      }
      return [runs, batterIdx];
    }

    // simulateGame now also returns per-player hit counts for that game
    function simulateGame(awayLineup, awayPitcher, homeLineup, homePitcher) {
      let gameState = { inning: 1, outs: 0, bases: [false, false, false], home_score: 0, away_score: 0 };
      let awayBatterIdx = 0, homeBatterIdx = 0;
      let inningScores = { away: [], home: [] };
      // track hits this game per player
      const playerHitsThisGame = {};

      for (let inning = 1; inning <= 9; inning++) {
        // Away bats
        let [awayRuns, nextAwayIdx] = simulateHalfInning(awayLineup, homePitcher, awayBatterIdx, playerHitsThisGame);
        gameState.away_score += awayRuns;
        inningScores.away.push(awayRuns);
        awayBatterIdx = nextAwayIdx;
        // Home bats
        if (inning === 9 && gameState.home_score > gameState.away_score) {
          inningScores.home.push(0);
          break;
        }
        let [homeRuns, nextHomeIdx] = simulateHalfInning(homeLineup, awayPitcher, homeBatterIdx, playerHitsThisGame);
        gameState.home_score += homeRuns;
        inningScores.home.push(homeRuns);
        homeBatterIdx = nextHomeIdx;
        if (inning >= 9 && gameState.home_score > gameState.away_score) break;
      }
      // Extra innings if tied
      let extraInning = 10;
      while (gameState.away_score === gameState.home_score && extraInning <= 15) {
        let [awayRuns, nextAwayIdx] = simulateHalfInning(awayLineup, homePitcher, awayBatterIdx, playerHitsThisGame);
        gameState.away_score += awayRuns;
        inningScores.away.push(awayRuns);
        awayBatterIdx = nextAwayIdx;
        let [homeRuns, nextHomeIdx] = simulateHalfInning(homeLineup, awayPitcher, homeBatterIdx, playerHitsThisGame);
        gameState.home_score += homeRuns;
        inningScores.home.push(homeRuns);
        homeBatterIdx = nextHomeIdx;
        if (gameState.home_score > gameState.away_score) break;
        extraInning++;
      }
      return {
        away_score: gameState.away_score,
        home_score: gameState.home_score,
        winner: gameState.home_score > gameState.away_score ? 'home' : 'away',
        inning_scores: inningScores,
        player_hits: playerHitsThisGame
      };
    }

    // Aggregate results (count games in which each player had >=1 hit)
    let homeWins = 0, awayWins = 0, homeScores = [], awayScores = [], playerHitFrequency = {};
    for (let sim = 0; sim < nSims; sim++) {
      const game = simulateGame(team1, away_pitcher, team2, home_pitcher);
      homeScores.push(game.home_score);
      awayScores.push(game.away_score);
      if (game.winner === 'home') homeWins++; else awayWins++;
      // For each player who had any hits this game, increment their game-hit frequency
      for (const [player, hits] of Object.entries(game.player_hits || {})) {
        if ((hits || 0) > 0) playerHitFrequency[player] = (playerHitFrequency[player] || 0) + 1;
      }
    }

    // Display results
    updateUI({
      home_win_pct: homeWins / nSims,
      away_win_pct: awayWins / nSims,
      avg_home_score: homeScores.reduce((a,b)=>a+b,0)/nSims,
      avg_away_score: awayScores.reduce((a,b)=>a+b,0)/nSims,
      avg_total_strikeouts: 0,
      player_hit_frequency: playerHitFrequency,
      n_sims: nSims
    });
}


function updateUI(d) {
    const home = (d.home_win_pct * 100).toFixed(1);
    const away = (d.away_win_pct * 100).toFixed(1);

    document.getElementById("percentDisplay").textContent = home + "%";

    document.getElementById("winPct").textContent =
      `Home Win: ${home}%\nAway Win: ${away}%`;

    document.getElementById("predScores").textContent =
      `Home Score: ${d.avg_home_score.toFixed(2)}\nAway Score: ${d.avg_away_score.toFixed(2)}`;

    // Top 5 Hit % — compute as (games-with-hits / n_sims) * 100
    const nSims = d.n_sims || 1;
    const sorted = Object.entries(d.player_hit_frequency)
      .sort((a,b) => b[1] - a[1])
      .slice(0,5);

    let txt = "";
    for (const [player, freq] of sorted) {
      txt += `${player}: ${((freq / nSims) * 100).toFixed(1)}%\n`;
    }
    document.getElementById("top5").textContent = txt;
}

// Apply saved color theme on page load
//gridItem: '#0f2436' },
const colorThemes = { 
            default: { bg: '#010613', accent: '#031D44', container: '#071227', gridItem: '#123041'},
            Athletics: { bg: '#003831', accent: '#a2aaad', container: '#EFB21E', gridItem: '#003831' },
            PittsburgPirates: { bg: '#27251F', accent: '#E4002B', container: '#FDB827', gridItem: '#27251F'},
            SanDiegoPadres: { bg: '#2F241D', accent: '#A2AAAD', container: '#FFC425', gridItem: '#2F241D' },
            SeattleMariners: { bg: '#0C2C56', accent: '#C4CED4', container: '#005C5C', gridItem: '#0C2C56' },
            SanFranciscoGiants: { bg: '#27251F', accent: '#AE8F6F', container: '#FD5A1E', gridItem: '#27251F' },
            StLouisCardinals: { bg: '#0C2340', accent: '#FEDB00', container: '#C41E3A', gridItem: '#0C2340' },
            TampaBayRays: { bg: '#8FBCE6', accent: '#F5D130', container: '#F5D130', gridItem: '#092C5C' },
            TexasRangers: { bg: '#003278', accent: '#C0111F', container: '#C0111F', gridItem: '#003278'},
            TorontoBlueJays: { bg: '#134A8E', accent: '#1D2D5C', container: '#E8291C', gridItem: '#1D2D5C' },
            MinnesotaTwins: { bg: '#002B5C', accent: '#D31145', container: '#D31145', gridItem: '#002B5C' },
            PhiladelphiaPhillies: { bg: '#E81828', accent: '#6BACE4', container: '#6BACE4', gridItem: '#002d72' },
            AtlantaBraves: { bg: '#CE1141', accent: '#13274F', container: '#13274F', gridItem: '#EAAA00' },
            ChicagoWhiteSox: { bg: '#27251F', accent: '#C4CED4', container: '#C4CED4', gridItem: '#27251F' },
            MiamiMarlins: { bg: '#000000', accent: '#EF3340', container: '#00A3E0', gridItem: '#EF3340' },
            NewYorkYankees: { bg: '#0C2340', accent: '#003087', container: '#E4002C', gridItem: '#003087' },
            MilwaukeeBrewers: { bg: '#12284b', accent: '#ffc52f', container: '#ffc52f', gridItem: '#12284b'},
            LosAngelesAngels: { bg: '#003263', accent: '#862633', container: '#BA0021', gridItem: '#862633'},
            ArizonaDiamondbacks: { bg: '#A71930', accent: '#000000', container: '#30CED8', gridItem: '#000000' },
            BaltimoreOrioles: { bg: '#000000', accent: '#DF4601', container: '#DF4601', gridItem: '#000000' },
            BostonRedSox: { bg: '#0C2340', accent: '#BD3039', container: '#BD3039', gridItem: '#0C2340' },
            ChicagoCubs: { bg: '#0E3386', accent: '#CC3433', container: '#CC3433', gridItem: '#0E3386' },
            CincinnatiReds: { bg: '#000000', accent: '#C6011F', container: '#C6011F', gridItem: '#000000' },
            ClevelandGuardians: { bg: '#00385D', accent: '#E50022', container: '#E50022', gridItem: '#00385D' },
            ColoradoRockies: { bg: '#333366', accent: '#131413', container: '#C4CED4', gridItem: '#131413' },
            DetroitTigers: { bg: '#0C2340', accent: '#FA4616', container: '#FA4616', gridItem: '#0C2340' },
            HoustonAstros: { bg: '#EB6E1F', accent: '#002D62', container: '#002D62', gridItem: '#F4911E' },
            KansasCityRoyals: { bg: '#004687', accent: '#BD9B60', container: '#BD9B60', gridItem: '#004687' },
            LosAngelesDodgers: { bg: '#005A9C', accent: '#A5ACAF', container: '#EF3E42', gridItem: '#A5ACAF'},
            WashingtonNationals: { bg: '#AB0003', accent: '#14225A', container: '#14225A', gridItem: '#AB0003' },
            NewYorkMets: { bg: '#002D72', accent: '#FF5910', container: '#FF5910',gridItem: '#002D72'}
          };
const savedTheme = localStorage.getItem('colorTheme') || 'default';
const themeColors = colorThemes[savedTheme] || colorThemes.default;
document.getElementById('mainBody').style.backgroundColor = themeColors.bg;
const topnav = document.querySelector('.topnav');
if (topnav) topnav.style.backgroundColor = themeColors.accent;
const gridContainers = document.querySelectorAll('.gridcontainer');
gridContainers.forEach(el => {
  el.style.backgroundColor = themeColors.container;
  el.style.borderColor = themeColors.containerBorder;
});
const gridItems = document.querySelectorAll('.griditem');
gridItems.forEach(el => {
  el.style.backgroundColor = themeColors.gridItem;
});
const resultBoxes = document.querySelectorAll('.result-box');
resultBoxes.forEach(el => {
  el.style.backgroundColor = themeColors.container;
});
</script>

</body>
</html>
